{% extends 'cart/layout.html' %}
{% block title %}Cart{% endblock title %}
{% block cart-content %}

{% for item in cart.item_set.all %}
<!-- !!!good -->
    <form action="{% url 'delete_cart_item' %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name="item_id" value="{{item.id}}">
        {{item.dish.name}} {{item.dish.price}}$ <input type="submit" value="remove">
    </form>
<!-- !!!bad -->
<!-- implement min value and max value validation on amount -->
    <form action="{% url 'change_cart_item' %}" method="POST" novalidate>
        {% csrf_token %}
        <input type="hidden" name="item_id" value="{{item.id}}">
        <input type="number" name="amount" min="1" max="99" value="{{item.amount}}">
        <input type="submit" value="change amount">
    </form>
    
{% endfor %}
<p>total: {{cart.total_to_pay}}$</p>
{% if cart.total_to_pay > 0 %}
    <a href="{% url 'fill_order' %}">make order</a> 
{% endif %}


{% endblock cart-content %}